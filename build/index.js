!function(){"use strict";var e,t={353:function(e,t,n){var o=window.wp.element,a=window.wp.blocks,i=window.React,r=window.wp.i18n,l=window.wp.components,c=window.wp.blockEditor,s=n.p+"images/logo.c11339f1.png",m=window.wp.apiFetch,u=n.n(m);function d({onFetchHandler:e}){const[t,n]=(0,i.useState)(null),[a,c]=(0,i.useState)(null),[s,m]=(0,i.useState)(null),d="bottimmo-widget",g="/wp-admin/options-general.php?page=bottimmo_widget";(0,i.useEffect)((()=>{u()({path:"/bottimmo-widget/v1/company-slug"}).then((e=>{e?(n(e),p(e).then((t=>{f(t,e)})).catch((e=>console.error(e)))):m((0,r.sprintf)((0,r.__)('Bitte setzen Sie im Admin-Bereich unter <a href="%s">"Einstellungen / BOTTIMMO Widgets"</a> das Firmen-K√ºrzel',d),g))})).catch((e=>console.error(e)))}),[]);const p=async e=>{try{return m(null),b(e)?(await fetch(`https://${e}.immowissen.org/landingpages.json`)).json():void m((0,r.__)('Bitte setzen Sie im Admin-Bereich unter "Einstellungen / BOTTIMMO Widgets" das Firmen-K√ºrzel',d))}catch(e){throw c(!1),m((0,r.sprintf)((0,r.__)('Keine Widgets gefunden! Bitte pr√ºfen Sie im Admin-Bereich unter <a href="%s">"Einstellungen / BOTTIMMO Widgets"</a> das Firmen-K√ºrzel',d),g)),Error(e)}},b=e=>/^\S+$/.test(e),f=(t,n)=>{t?(c(!0),e({companySlug:n,landingpages:t})):(m((0,r.sprintf)((0,r.__)('Keine Widgets gefunden! Bitte pr√ºfen Sie im Admin-Bereich unter <a href="%s">"Einstellungen / BOTTIMMO Widgets"</a> das Firmen-K√ºrzel',d),g)),e({companySlug:n,landingpages:null}),c(!1))};return(0,o.createElement)(l.PanelBody,{title:`${!1===a?"üö´ ":"‚úÖ "}${(0,r.__)("Ihr Firmenk√ºrzel (Slug)",d)}`,initialOpen:!a},a&&(0,o.createElement)("p",null,(0,o.createElement)("strong",null,t),(0,o.createElement)(l.Button,{variant:"promary",href:g,icon:"edit",label:(0,r.__)("√Ñndern",d)})),s&&(0,o.createElement)("p",{style:{color:"#ff0000"},dangerouslySetInnerHTML:{__html:s}}))}function g({availableLP:e,selectedWidget:t,selectedVariant:n,onChangeHandler:a}){const[c,s]=(0,i.useState)(null),[m,u]=(0,i.useState)(""),[d,g]=(0,i.useState)(!1),[p,b]=(0,i.useState)([]),[f,h]=(0,i.useState)([]),[w,E]=(0,i.useState)([]);return(0,i.useEffect)((()=>{t&&s(t),n&&(u(n),["wizzard","extended"].includes(n)&&g(!0));const o=e.filter((({type:e})=>!["GUIDE","CHECKLIST"].includes(e)));b(o);const a=e.filter((({type:e})=>"GUIDE"===e));h(a);const i=e.filter((({type:e})=>"CHECKLIST"===e));E(i)}),[]),(0,o.createElement)(l.PanelBody,{title:`${c?"‚úÖ ":""}${(0,r.__)("Die Widgetauswahl","bottimmo-widget")}`},(0,o.createElement)(l.PanelRow,null,(0,o.createElement)(l.SelectControl,{value:c,onChange:e=>{c!==e&&(s(e),g(!1),a({widget:e,variant:""}))}},(0,o.createElement)("option",{value:""},(0,r.__)("Bitte ausw√§hlen...","bottimmo-widget")),p&&(0,o.createElement)("optgroup",{label:(0,r.__)("Tools","bottimmo-widget")},p.map((({name:e,slug:t,isActive:n})=>(0,o.createElement)("option",{key:t,value:t,disabled:!n},e)))),f&&(0,o.createElement)("optgroup",{label:(0,r.__)("Ratgeber","bottimmo-widget")},f.map((({name:e,slug:t,isActive:n})=>(0,o.createElement)("option",{key:t,value:t,disabled:!n},e)))),w&&(0,o.createElement)("optgroup",{label:(0,r.__)("Checklisten","bottimmo-widget")},w.map((({name:e,slug:t,isActive:n})=>(0,o.createElement)("option",{key:t,value:t,disabled:!n},e)))))),("telefonische-beratung"===c||[...f,...w].find((({slug:e})=>e===c)))&&(0,o.createElement)(l.PanelRow,null,(0,o.createElement)("label",{for:"btmVariant"},(0,o.createElement)(l.FormToggle,{id:"btmVariant",checked:d,onChange:({target:e})=>{g(e.checked);let t="";e.checked&&("telefonische-beratung"===c?t="wizzard":[...f,...w].find((({slug:e})=>e===c))&&(t="extended")),a({widget:c,variant:t})}}),(0,o.createElement)("span",{className:"copy",style:{marginLeft:"16px"}},(0,r.__)("umfangreiche Einbindung","bottimmo-widget")))))}function p({btmCookieConsent:e,btmCustomCookie:t,onChangeHandler:n}){const[a,c]=(0,i.useState)(!1),[s,m]=(0,i.useState)(null);let u;return(0,i.useEffect)((()=>{m(t),c("true"===e)}),[]),(0,o.createElement)(l.PanelBody,{title:(0,r.__)("Dritter Schritt (optional): Cookie Behandlung","bottimmo-widget"),initialOpen:!1},(0,o.createElement)(l.PanelRow,null,(0,o.createElement)("label",{for:"btmCookieConsent"},(0,o.createElement)(l.FormToggle,{id:"btmCookieConsent",checked:a,onChange:({target:e})=>{c(e.checked),n({btmCookieConsent:e.checked})}}),(0,o.createElement)("span",{className:"copy",style:{marginLeft:"16px"}},(0,r.__)('Ich verwende "Cookiebot" auf meiner Website',"bottimmo-widget")))),(0,o.createElement)(l.PanelRow,null,(0,o.createElement)(l.TextControl,{label:(0,r.__)("Ich verwenden ein eigenes Cookie namens:","bottimmo-widget"),value:s,onChange:e=>{m(e),clearTimeout(u),u=setTimeout((()=>{n({btmCustomCookie:e})}),500)}})))}function b({btmCompany:e,btmSlug:t,btmVariant:n,btmCookieConsent:a,btmCustomCookie:i}){return(0,o.createElement)("div",{"data-company":e,"data-slug":t,"data-variant":n,"data-cookieconsent":a,"data-consent-cookie":i,"data-bottimmo":!0})}var f=JSON.parse('{"u2":"create-block/bottimmo-widget"}');(0,a.registerBlockType)(f.u2,{edit:function({attributes:e,setAttributes:t}){const[n,a]=(0,i.useState)(null),[r,m]=(0,i.useState)(null),[u,b]=(0,i.useState)(e.btmSlug),[f,h]=(0,i.useState)(e.btmVariant),[w,E]=(0,i.useState)(e.btmCookieConsent),[v,C]=(0,i.useState)(e.btmCustomCookie),[k]=(0,i.useState)(Math.random());return(0,i.useEffect)((()=>{const e=document.getElementById(k);if(e.innerHTML="",r&&u){const t=document.createElement("div");t.setAttribute("data-company",r),t.setAttribute("data-slug",u),t.setAttribute("data-variant",f),t.setAttribute("data-cookieconsen",w),t.setAttribute("data-consent-cookie",v),t.setAttribute("data-bottimmo",!0),e.append(t),window.dispatchEvent(new Event("bottimmo:element-added"))}}),[r,u,f,w,v]),(0,o.createElement)("div",{...(0,c.useBlockProps)()},(0,o.createElement)(l.Panel,{header:(0,o.createElement)("img",{src:s,alt:"BOTTIMMO Logo"}),className:"mb-l"},(0,o.createElement)(d,{onFetchHandler:({companySlug:e,landingpages:n})=>{a(n),t({btmCompany:e}),m(e)}}),n&&(0,o.createElement)(o.Fragment,null,(0,o.createElement)(g,{selectedWidget:u,selectedVariant:f,availableLP:n,onChangeHandler:({widget:e,variant:n})=>{t({btmSlug:e,btmVariant:n}),b(e),h(n)}}),(0,o.createElement)(p,{btmCookieConsent:w,btmCustomCookie:v,onChangeHandler:({btmCookieConsent:e,btmCustomCookie:n})=>{t({btmCookieConsent:e,btmCustomCookie:n}),E(e),C(n)}}))),(0,o.createElement)("div",{id:k}))},save:function({attributes:e}){const t=c.useBlockProps.save();return(0,o.createElement)("div",{...t},(0,o.createElement)(b,{...e}))},icon:{src:(0,o.createElement)("svg",{version:"1.0",xmlns:"http://www.w3.org/2000/svg",width:"500.000000pt",height:"500.000000pt",viewBox:"0 0 500.000000 500.000000",preserveAspectRatio:"xMidYMid meet"},(0,o.createElement)("g",{transform:"translate(0.000000,500.000000) scale(0.100000,-0.100000)",fill:"#000000",stroke:"none"},(0,o.createElement)("path",{d:"M777 4874 c-1 -1 -22 -4 -47 -7 -276 -35 -516 -260 -584 -549 -13 -55 -15 -299 -15 -1818 0 -1693 1 -1758 19 -1828 54 -206 186 -369 375 -462 163 -81 -10 -74 1945 -77 1869 -2 1809 -4 1944 47 94 36 176 90 251 166 82 83 135 168 173 279 l27 80 3 1731 2 1732 -272 -1 c-150 0 -284 3 -298 8 -42 12 -91 56 -108 94 -13 30 -16 85 -18 316 -1 154 -2 283 -3 286 -1 5 -3387 9 -3394 3z m2588 -609 c75 -19 175 -66 214 -102 14 -12 29 -19 34 -16 6 3 7 1 4 -4 -4 -6 6 -21 21 -34 67 -58 142 -187 159 -274 4 -22 8 -260 8 -530 0 -474 -1 -492 -21 -552 -28 -79 -32 -76 106 -98 114 -19 197 -59 263 -127 54 -56 77 -97 104 -183 16 -55 18 -103 18 -585 0 -289 -3 -544 -7 -567 -15 -86 -85 -218 -151 -285 -50 -50 -129 -105 -188 -132 -110 -51 -113 -51 -1470 -50 -1393 1 -1344 -1 -1475 64 -128 63 -220 194 -247 351 -11 60 -13 354 -12 1435 l2 1359 22 53 c23 57 44 93 76 130 36 43 70 77 80 80 23 8 65 37 65 45 0 4 5 5 10 2 6 -4 17 -1 25 5 38 32 149 35 1221 34 990 -1 1074 -2 1139 -19z"}),(0,o.createElement)("path",{d:"M1279 3878 c-49 -9 -105 -50 -134 -99 -19 -33 -20 -53 -20 -536 l0 -501 1050 -1 c691 0 1063 4 1089 10 54 15 101 52 123 100 18 38 19 68 19 474 l-1 433 -31 39 c-16 21 -52 49 -78 62 l-49 24 -962 1 c-530 1 -983 -2 -1006 -6z"}),(0,o.createElement)("path",{d:"M1125 1803 c1 -590 -1 -567 62 -624 60 -55 0 -52 1312 -52 926 0 1225 3 1253 12 45 15 86 54 109 106 16 36 18 79 17 490 0 481 -1 489 -51 544 -12 13 -40 32 -62 42 -38 18 -98 19 -1341 19 l-1301 0 2 -537z"}),(0,o.createElement)("path",{d:"M4538 4860 c-21 -16 -22 -27 -23 -151 -1 -128 5 -165 29 -181 6 -4 74 -8 152 -8 183 0 174 -10 174 182 0 123 -3 148 -17 159 -12 10 -54 14 -155 15 -119 1 -142 -1 -160 -16z"})))}})}},n={};function o(e){var a=n[e];if(void 0!==a)return a.exports;var i=n[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.m=t,e=[],o.O=function(t,n,a,i){if(!n){var r=1/0;for(m=0;m<e.length;m++){n=e[m][0],a=e[m][1],i=e[m][2];for(var l=!0,c=0;c<n.length;c++)(!1&i||r>=i)&&Object.keys(o.O).every((function(e){return o.O[e](n[c])}))?n.splice(c--,1):(l=!1,i<r&&(r=i));if(l){e.splice(m--,1);var s=a();void 0!==s&&(t=s)}}return t}i=i||0;for(var m=e.length;m>0&&e[m-1][2]>i;m--)e[m]=e[m-1];e[m]=[n,a,i]},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var a=n.length-1;a>-1&&!e;)e=n[a--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e}(),function(){var e={826:0,431:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var a,i,r=n[0],l=n[1],c=n[2],s=0;if(r.some((function(t){return 0!==e[t]}))){for(a in l)o.o(l,a)&&(o.m[a]=l[a]);if(c)var m=c(o)}for(t&&t(n);s<r.length;s++)i=r[s],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(m)},n=self.webpackChunkbottimmo_widget=self.webpackChunkbottimmo_widget||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var a=o.O(void 0,[431],(function(){return o(353)}));a=o.O(a)}();